<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Suporte X ‚Äî Painel de Atendimentos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/central.css" />
  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar">
        <div class="brand">
          <img src="/icon-192.png" alt="Logo Suporte X" />
          <div>
            <h1>Painel de Atendimentos</h1>
            <span>Opera√ß√µes em tempo real</span>
          </div>
        </div>
        <div class="tech-identity">
          <button class="avatar-button" type="button" aria-label="Abrir menu do perfil">
            <span>IX</span>
          </button>
          <div>
            <strong>Isac Xavier</strong>
            <div class="muted small">Em atendimento agora</div>
          </div>
        </div>
        <div class="availability-control">
          <div class="row" id="availabilityRow">
            <label class="muted small" style="flex: 1;">Painel de Atendimentos</label>
            <label class="switch">
              <input id="autoSwitch" type="checkbox" />
              <span class="slider"></span>
            </label>
          </div>
          <div class="small muted" id="autoSwitchLabel">ACEITAR CHAMADOS AUTOMATICAMENTE</div>
        </div>
        <button class="primary-btn">Entrar na fila dispon√≠vel</button>
        <div>
          <div class="section-title">Fila de chamados</div>
          <div class="queue-list" id="queue">
            <article class="ticket">
              <div class="ticket-header">
                <span class="ticket-title">#9241 ‚Ä¢ Ana Souza</span>
                <span class="badge warning">SLA 08:21</span>
              </div>
              <div class="ticket-body">
                <div class="badge dot">Plano Premium</div>
              </div>
              <div class="ticket-footer">
                <span>Galaxy S22 ‚Ä¢ Android 14</span>
                <span>3 min em espera</span>
              </div>
              <div class="ticket-actions">
                <button class="tag-btn">Aceitar</button>
                <button class="tag-btn">Transferir</button>
                <button class="tag-btn">Mensagem inicial</button>
              </div>
            </article>
            <article class="ticket">
              <div class="ticket-header">
                <span class="ticket-title">#9239 ‚Ä¢ Jo√£o Pedro</span>
                <span class="badge success">SLA 18:43</span>
              </div>
              <div class="ticket-body">
                <div class="badge dot">Plano Essencial</div>
              </div>
              <div class="ticket-footer">
                <span>Motorola G60 ‚Ä¢ Android 13</span>
                <span>7 min em espera</span>
              </div>
              <div class="ticket-actions">
                <button class="tag-btn">Aceitar</button>
                <button class="tag-btn">Prioridade</button>
                <button class="tag-btn">Encaminhar</button>
              </div>
            </article>
            <article class="ticket">
              <div class="ticket-header">
                <span class="ticket-title">#9235 ‚Ä¢ Juliana Costa</span>
                <span class="badge danger">SLA 02:14</span>
              </div>
              <div class="ticket-body">
                <div class="badge dot">Plano Enterprise</div>
              </div>
              <div class="ticket-footer">
                <span>Redmi Note 11 ‚Ä¢ Android 12</span>
                <span>12 min em espera</span>
              </div>
              <div class="ticket-actions">
                <button class="tag-btn">Retomar</button>
                <button class="tag-btn">Marcar urg√™ncia</button>
              </div>
            </article>
          </div>
        </div>
        <div>
          <div class="section-title">Filtros r√°pidos</div>
          <div class="ticket-actions">
            <button class="tag-btn">Padr√£o</button>
            <button class="tag-btn">SLA cr√≠tico</button>
            <button class="tag-btn">Chamadas</button>
          </div>
        </div>
      </aside>
      <div class="content">
        <header class="topbar">
          <div class="topbar-left">
            <div class="status-pill">
              <span class="status-indicator" aria-hidden="true"></span>
              Dispon√≠vel ‚Ä¢ T√©cnica n√≠vel 2
            </div>
            <div>
              <div class="section-title" style="margin: 0;">Sess√µes ativas</div>
              <strong>2 em andamento</strong>
            </div>
          </div>
          <div class="topbar-actions">
            <button class="theme-switch" id="themeSwitch" type="button">Tema claro</button>
            <button class="icon-btn" type="button" aria-label="Notifica√ß√µes">
              üîî
            </button>
            <div class="profile-chip">
              <div class="profile-avatar">IX</div>
              <div>
                <strong>Isac Xavier</strong>
                <div class="section-title" style="margin: 0; font-size: 11px;">Supervisor</div>
              </div>
            </div>
          </div>
        </header>
        <main class="dashboard">
          <section class="cards-grid">
            <article class="metric-card">
              <span class="metric-label">Atendimentos hoje</span>
              <span class="metric-value">18</span>
              <span class="metric-trend">+12% vs. ontem</span>
            </article>
            <article class="metric-card">
              <span class="metric-label">FCR (Primeiro contato)</span>
              <span class="metric-value">86%</span>
              <span class="metric-trend">+8 pts</span>
            </article>
            <article class="metric-card">
              <span class="metric-label">NPS</span>
              <span class="metric-value">74</span>
              <span class="metric-trend">Meta atingida</span>
            </article>
            <article class="metric-card">
              <span class="metric-label">Tempo m√©dio</span>
              <span class="metric-value">07:12</span>
              <span class="metric-trend negative">-25% ‚Ä¢ √∫ltimos 7 dias</span>
            </article>
          </section>

          <section class="session-area">
            <aside class="panel">
              <div class="panel-header">
                <h2>Contexto do dispositivo</h2>
              </div>
              <div class="panel-body">
                <div class="context-grid">
                  <div class="context-item">
                    <strong>Aparelho</strong>
                    <span>Galaxy S22 ‚Ä¢ Android 14 ‚Ä¢ App 2.3.1</span>
                  </div>
                  <div class="context-item">
                    <strong>Identifica√ß√£o</strong>
                    <span>Ana Souza ‚Ä¢ Cliente desde 2021</span>
                  </div>
                  <div class="context-item">
                    <strong>Rede atual</strong>
                    <span>Wi-Fi (‚àí58 dBm) ‚Ä¢ Lat√™ncia 74 ms</span>
                  </div>
                  <div class="context-item">
                    <strong>Sa√∫de do dispositivo</strong>
                    <span>CPU 48% ‚Ä¢ RAM 2.1 GB livre ‚Ä¢ Bateria 62% (34¬∞C)</span>
                  </div>
                  <div class="context-item">
                    <strong>Permiss√µes cr√≠ticas</strong>
                    <span>Screen share ‚úÖ ‚Ä¢ Microfone ‚úÖ ‚Ä¢ AccessibilityService ‚ö†Ô∏è</span>
                  </div>
                </div>
                <div>
                  <div class="section-title">Timeline</div>
                  <div class="timeline">
                    <div class="timeline-entry">17:18 ‚Ä¢ Cliente entrou na fila</div>
                    <div class="timeline-entry">17:21 ‚Ä¢ Consentimento LGPD validado</div>
                    <div class="timeline-entry">17:22 ‚Ä¢ Compartilhamento de tela iniciado</div>
                    <div class="timeline-entry">17:24 ‚Ä¢ Acesso remoto solicitado</div>
                  </div>
                </div>
              </div>
            </aside>

            <section class="panel">
              <div class="panel-header">
                <h2>Sess√£o em andamento</h2>
              </div>
              <div class="panel-body" style="gap: 18px;">
                <div class="video-shell">
                  <div class="placeholder">Stream seguro ‚Ä¢ aguardando reconex√£o (00:18)</div>
                  <div class="floating-controls">
                    <button type="button">Reproduzir</button>
                    <button type="button">Qualidade: Auto</button>
                    <button type="button">Solicitar acesso remoto</button>
                    <button type="button">Stats ao vivo</button>
                  </div>
                </div>
                <div class="indicators">
                  <div class="indicator">
                    <strong>Rede do cliente</strong>
                    <span>Wi-Fi ‚Ä¢ 42 Mbps</span>
                  </div>
                  <div class="indicator">
                    <strong>Qualidade da sess√£o</strong>
                    <span>Bitrate 2.6 Mbps ‚Ä¢ FPS 28</span>
                  </div>
                  <div class="indicator">
                    <strong>Alertas</strong>
                    <span>Perda de pacote 5% ‚Ä¢ Est√°vel</span>
                  </div>
                </div>
              </div>
            </section>

            <aside class="panel">
              <div class="panel-header">
                <h2>Comunica√ß√£o</h2>
              </div>
              <div class="panel-body chat-area">
                <div class="chat-thread" aria-live="polite">
                  <div class="message">17:19 ‚Ä¢ Ana: Ol√°, meu app n√£o abre a c√¢mera.</div>
                  <div class="message self">17:20 ‚Ä¢ Isac: Vou te ajudar, Ana. Vamos iniciar o compartilhamento?</div>
                  <div class="message">17:21 ‚Ä¢ Ana enviou um print (download)</div>
                </div>
                <div class="quick-replies">
                  <button type="button">Enviar checklist LGPD</button>
                  <button type="button">Solicitar permiss√£o de acessibilidade</button>
                  <button type="button">Avisar sobre encerramento</button>
                </div>
                <form class="chat-form" onsubmit="return false;">
                  <input type="text" placeholder="Digite uma mensagem ou use /comandos" aria-label="Mensagem" />
                  <button type="submit">Enviar</button>
                </form>
              </div>
            </aside>
          </section>

          <section class="panel">
            <div class="panel-header">
              <h2>Encerramento</h2>
            </div>
            <div class="panel-body closure">
              <label>
                Resultado
                <select>
                  <option>Resolvido</option>
                  <option>Parcial</option>
                  <option>Transferido</option>
                  <option>Cancelado</option>
                </select>
              </label>
              <label>
                Sintoma principal
                <textarea rows="2" placeholder="Ex.: C√¢mera fecha ao abrir a leitura de QR Code"></textarea>
              </label>
              <label>
                Solu√ß√£o aplicada
                <textarea rows="3" placeholder="Ex.: Limpeza de cache + atualiza√ß√£o do app pelo Play Store"></textarea>
              </label>
              <button class="primary-action" type="button">Encerrar suporte e disparar pesquisa</button>
            </div>
          </section>
        </main>
      </div>
    </div>
    <script>
      const switcher = document.getElementById('themeSwitch');
      switcher?.addEventListener('click', () => {
        const body = document.body;
        const light = body.getAttribute('data-theme') === 'light';
        body.setAttribute('data-theme', light ? 'dark' : 'light');
        switcher.textContent = light ? 'Tema claro' : 'Tema escuro';
      });

      const autoSwitch = document.getElementById('autoSwitch');
      const autoSwitchLabel = document.getElementById('autoSwitchLabel');
      autoSwitch?.addEventListener('change', () => {
        const on = !!autoSwitch.checked;
        if(autoSwitchLabel){
          autoSwitchLabel.textContent = on ? 'ACEITANDO AUTOMATICAMENTE' : 'ACEITAR CHAMADOS AUTOMATICAMENTE';
          autoSwitchLabel.classList.toggle('on', on);
        }
      });
      if(autoSwitchLabel){
        autoSwitchLabel.classList.toggle('on', !!autoSwitch?.checked);
      }

      const chatThread = document.querySelector('.chat-thread');
      if(chatThread){
        const scrollToBottom = () => {
          chatThread.scrollTo({ top: chatThread.scrollHeight, behavior: 'smooth' });
        };
        let stickToBottom = true;
        const tolerance = 16;
        chatThread.addEventListener('scroll', () => {
          const distance = chatThread.scrollTop + chatThread.clientHeight;
          stickToBottom = distance >= chatThread.scrollHeight - tolerance;
        });
        const observer = new MutationObserver((mutations) => {
          const added = mutations.some((m) => m.addedNodes.length);
          if(added && stickToBottom){
            scrollToBottom();
          }
        });
        observer.observe(chatThread, { childList: true });
        scrollToBottom();
      }
    </script>
  </body>
</html>
